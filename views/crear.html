<!-- Form before publishing a prodoct-->
<section class="uk-section custom-wrapper">
    <div class="uk-card uk-card-default uk-card-body
        uk-width-1-2@m uk-align-center">
        <form method="post" action="/crear" enctype="multipart/form-data">
            <fieldset class="uk-fieldset">

                <legend class="uk-legend">Crear una nueva tarea</legend>

                <div class="uk-margin">
                    <label class="uk-form-label">Título</label>
                    <input class="uk-input" type="text" name="titulo"
                           placeholder="Fallo en servidor" required="true">
                </div>

                <div class="uk-grid uk-margin">
                    <div class="uk-width-2-5">
                        <label class="uk-form-label">Seleccionar operario</label><br>
                        <div>
                        <select class="uk-select uk-width-3-5" name="operario" id="operario"
                                required="true">
                            {{#each operarios}}
                                <option value="{{nombre}}">{{nombre}}</option>
                            {{/each}}
                        </select>
                        <button style="padding: 0 8px;" id="add" class="uk-button uk-button-primary uk-border-rounded" type="button">
                            <span uk-icon="icon: plus-circle"></span>
                        </button>
                        <button style="padding: 0 8px;" id="remove" class="uk-button uk-button-danger  uk-border-rounded" type="button">
                            <span uk-icon="icon: minus-circle"></span>
                        </button>
                        </div>
                    </div>
                    <div class="uk-width-3-5">
                        <label class="uk-form-label">Operario/s asignado/s</label>
                        <input class="uk-input" type="text" readonly id="operarios-asignados"
                               name="operariosasignados" required="true">
                    </div>
                </div>

                <script>
                    var operarios = []

                    $("#add").click(function () {
                        for( var i = 0; i < operarios.length; i++){
                            if ( operarios[i] === $("#operario").val()) {
                                return
                            }
                        }
                        operarios.push($("#operario").val())
                        $("#operarios-asignados").val(operarios)
                    })

                    $("#remove").click(function () {
                        for( var i = 0; i < operarios.length; i++){
                            if ( operarios[i] === $("#operario").val()) {
                                operarios.splice(i, 1);
                            }
                        }
                        $("#operarios-asignados").val(operarios)
                    })
                </script>

                <div class="uk-grid uk-margin">
                    <div class="uk-width-1-3">
                        <label class="uk-form-label">
                            Fecha límite
                        </label>
                        <input class="uk-input" type="number"
                               name="dia"
                               placeholder="Día"
                               required="true", min="1" max="31">
                    </div>
                    <div class="uk-width-1-3">
                        <label class="uk-form-label"> &nbsp;
                        </label>
                        <select class="uk-select" name="mes"
                                required="true">
                            <option value="" disabled selected>Mes</option>
                            <option value="enero">Enero</option>
                            <option value="enero">Febrero</option>
                            <option value="enero">Marzo</option>
                            <option value="enero">Abril</option>
                            <option value="enero">Mayo</option>
                            <option value="enero">Junio</option>
                            <option value="enero">Julio</option>
                            <option value="enero">Agosto</option>
                            <option value="enero">Septiembre</option>
                            <option value="enero">Octubre</option>
                            <option value="enero">Noviembre</option>
                            <option value="enero">Diciembre</option>
                        </select>
                    </div>
                    <div class="uk-width-1-3">
                        <label class="uk-form-label"> &nbsp;
                        </label>
                        <input class="uk-input" type="number"
                               name="año"
                               placeholder="Año"
                               required="true", min="1960" max="2050">
                    </div>
                </div>

                <div class="uk-margin">
                    <label class="uk-form-label">Descripción</label>
                    <textarea class="uk-textarea" rows="5"
                              name="descripcion"
                              placeholder="El servidor de desarrollo no reponde a peticiones GET..."
                              required="true"></textarea>
                </div>

                <button class="uk-button uk-button-primary uk-width-1-1
                        uk-margin-small-bottom"
                        type="submit">
                    Crear
                </button>
            </fieldset>
        </form>
    </div>
</section>
